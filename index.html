{\rtf1\ansi\ansicpg932\cocoartf2761
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fnil\fcharset0 Menlo-Regular;}
{\colortbl;\red255\green255\blue255;\red111\green14\blue195;\red236\green241\blue247;\red0\green0\blue0;
\red14\green110\blue109;\red24\green112\blue43;\red77\green80\blue85;\red164\green69\blue11;\red191\green28\blue37;
}
{\*\expandedcolortbl;;\cssrgb\c51765\c18824\c80784;\cssrgb\c94118\c95686\c97647;\cssrgb\c0\c0\c0;
\cssrgb\c0\c50196\c50196;\cssrgb\c9412\c50196\c21961;\cssrgb\c37255\c38824\c40784;\cssrgb\c70980\c34902\c3137;\cssrgb\c80392\c19216\c19216;
}
\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\deftab720
\pard\pardeftab720\partightenfactor0

\f0\fs28 \cf2 \cb3 \expnd0\expndtw0\kerning0
\outl0\strokewidth0 \strokec2 import\cf0 \strokec4  \cf5 \strokec5 React\cf0 \strokec4 , \{ useState, useMemo, useEffect \} \cf2 \strokec2 from\cf0 \strokec4  \cf6 \strokec6 'react'\cf0 \strokec4 ;\cb1 \
\cf2 \cb3 \strokec2 import\cf0 \strokec4  \{ \cf5 \strokec5 Plus\cf0 \strokec4 , \cf5 \strokec5 Trash2\cf0 \strokec4 , \cf5 \strokec5 Users\cf0 \strokec4 , \cf5 \strokec5 Receipt\cf0 \strokec4 , \cf5 \strokec5 CreditCard\cf0 \strokec4 , \cf5 \strokec5 ChevronRight\cf0 \strokec4 , \cf5 \strokec5 CheckCircle2\cf0 \strokec4 , \cf5 \strokec5 UserPlus\cf0 \strokec4 , \cf5 \strokec5 X\cf0 \strokec4 , \cf5 \strokec5 Sparkles\cf0 \strokec4 , \cf5 \strokec5 Loader2\cf0 \strokec4 , \cf5 \strokec5 MessageSquare\cf0 \strokec4 , \cf5 \strokec5 BookOpen\cf0 \strokec4 , \cf5 \strokec5 BarChart3\cf0 \strokec4  \} \cf2 \strokec2 from\cf0 \strokec4  \cf6 \strokec6 'lucide-react'\cf0 \strokec4 ;\cb1 \
\
\cf7 \cb3 \strokec7 /**\cf0 \cb1 \strokec4 \
\cf7 \cb3 \strokec7  * SplitTrip App with Gemini AI\cf0 \cb1 \strokec4 \
\cf7 \cb3 \strokec7  * \uc0\u21106 \u12426 \u21208 \u31934 \u31639 \u12434 \u31777 \u21336 \u12395 \u12377 \u12427 Web\u12450 \u12503 \u12522 \u12465 \u12540 \u12471 \u12519 \u12531  + AI\u12450 \u12471 \u12473 \u12479 \u12531 \u12488 \cf0 \cb1 \strokec4 \
\cf7 \cb3 \strokec7  */\cf0 \cb1 \strokec4 \
\
\cf2 \cb3 \strokec2 const\cf0 \strokec4  \cf5 \strokec5 App\cf0 \strokec4  = () => \{\cb1 \
\cb3   \cf7 \strokec7 // --- Constants ---\cf0 \cb1 \strokec4 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  apiKey = \cf6 \strokec6 ""\cf0 \strokec4 ;\cb1 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  appId = \cf2 \strokec2 typeof\cf0 \strokec4  __app_id !== \cf6 \strokec6 'undefined'\cf0 \strokec4  ? __app_id : \cf6 \strokec6 'split-trip-ai'\cf0 \strokec4 ;\cb1 \
\
\cb3   \cf7 \strokec7 // --- State ---\cf0 \cb1 \strokec4 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  [members, setMembers] = useState([\cf6 \strokec6 '\uc0\u33258 \u20998 '\cf0 \strokec4 , \cf6 \strokec6 '\uc0\u21451 \u20154 A'\cf0 \strokec4 , \cf6 \strokec6 '\uc0\u21451 \u20154 B'\cf0 \strokec4 ]);\cb1 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  [expenses, setExpenses] = useState([]);\cb1 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  [newMemberName, setNewMemberName] = useState(\cf6 \strokec6 ''\cf0 \strokec4 );\cb1 \
\cb3   \cb1 \
\cb3   \cf7 \strokec7 // UI State\cf0 \cb1 \strokec4 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  [showAddForm, setShowAddForm] = useState(\cf2 \strokec2 false\cf0 \strokec4 );\cb1 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  [description, setDescription] = useState(\cf6 \strokec6 ''\cf0 \strokec4 );\cb1 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  [amount, setAmount] = useState(\cf6 \strokec6 ''\cf0 \strokec4 );\cb1 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  [payer, setPayer] = useState(\cf6 \strokec6 ''\cf0 \strokec4 );\cb1 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  [selectedParticipants, setSelectedParticipants] = useState([]);\cb1 \
\
\cb3   \cf7 \strokec7 // AI State\cf0 \cb1 \strokec4 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  [aiLoading, setAiLoading] = useState(\cf2 \strokec2 false\cf0 \strokec4 );\cb1 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  [aiResult, setAiResult] = useState(\cf2 \strokec2 null\cf0 \strokec4 );\cb1 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  [aiError, setAiError] = useState(\cf2 \strokec2 null\cf0 \strokec4 );\cb1 \
\
\cb3   \cf7 \strokec7 // \uc0\u21021 \u26399 \u21270 \u26178 \u12395 payer\u12434 \u12475 \u12483 \u12488 \cf0 \cb1 \strokec4 \
\cb3   useEffect(() => \{\cb1 \
\cb3     \cf2 \strokec2 if\cf0 \strokec4  (members.length > \cf8 \strokec8 0\cf0 \strokec4  && !payer) \{\cb1 \
\cb3       setPayer(members[\cf8 \strokec8 0\cf0 \strokec4 ]);\cb1 \
\cb3       setSelectedParticipants([...members]);\cb1 \
\cb3     \}\cb1 \
\cb3   \}, [members, payer]);\cb1 \
\
\cb3   \cf7 \strokec7 // --- Gemini API Logic ---\cf0 \cb1 \strokec4 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  callGemini = \cf2 \strokec2 async\cf0 \strokec4  (prompt) => \{\cb1 \
\cb3     setAiLoading(\cf2 \strokec2 true\cf0 \strokec4 );\cb1 \
\cb3     setAiError(\cf2 \strokec2 null\cf0 \strokec4 );\cb1 \
\cb3     setAiResult(\cf2 \strokec2 null\cf0 \strokec4 );\cb1 \
\
\cb3     \cf2 \strokec2 const\cf0 \strokec4  maxRetries = \cf8 \strokec8 5\cf0 \strokec4 ;\cb1 \
\cb3     \cf2 \strokec2 let\cf0 \strokec4  delay = \cf8 \strokec8 1000\cf0 \strokec4 ;\cb1 \
\
\cb3     \cf2 \strokec2 for\cf0 \strokec4  (\cf2 \strokec2 let\cf0 \strokec4  i = \cf8 \strokec8 0\cf0 \strokec4 ; i < maxRetries; i++) \{\cb1 \
\cb3       \cf2 \strokec2 try\cf0 \strokec4  \{\cb1 \
\cb3         \cf2 \strokec2 const\cf0 \strokec4  response = \cf2 \strokec2 await\cf0 \strokec4  fetch(\cf6 \strokec6 `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=\cf0 \strokec4 $\{apiKey\}\cf6 \strokec6 `\cf0 \strokec4 , \{\cb1 \
\cb3           method: \cf6 \strokec6 'POST'\cf0 \strokec4 ,\cb1 \
\cb3           headers: \{ \cf6 \strokec6 'Content-Type'\cf0 \strokec4 : \cf6 \strokec6 'application/json'\cf0 \strokec4  \},\cb1 \
\cb3           body: \cf5 \strokec5 JSON\cf0 \strokec4 .stringify(\{\cb1 \
\cb3             contents: [\{ parts: [\{ text: prompt \}] \}],\cb1 \
\cb3             systemInstruction: \{ parts: [\{ text: \cf6 \strokec6 "\uc0\u12354 \u12394 \u12383 \u12399 \u26053 \u34892 \u12398 \u31934 \u31639 \u12434 \u12469 \u12509 \u12540 \u12488 \u12377 \u12427 \u35242 \u20999 \u12394 \u12450 \u12471 \u12473 \u12479 \u12531 \u12488 \u12391 \u12377 \u12290 \u12518 \u12540 \u12470 \u12540 \u12364 \u20837 \u21147 \u12375 \u12383 \u25903 \u20986 \u12487 \u12540 \u12479 \u12395 \u22522 \u12389 \u12356 \u12390 \u12289 \u27005 \u12375 \u12367 \u24441 \u12395 \u31435 \u12388 \u22238 \u31572 \u12434 \u26085 \u26412 \u35486 \u12391 \u34892 \u12387 \u12390 \u12367 \u12384 \u12373 \u12356 \u12290 "\cf0 \strokec4  \}] \}\cb1 \
\cb3           \})\cb1 \
\cb3         \});\cb1 \
\
\cb3         \cf2 \strokec2 if\cf0 \strokec4  (!response.ok) \cf2 \strokec2 throw\cf0 \strokec4  \cf2 \strokec2 new\cf0 \strokec4  \cf5 \strokec5 Error\cf0 \strokec4 (\cf6 \strokec6 'API request failed'\cf0 \strokec4 );\cb1 \
\cb3         \cb1 \
\cb3         \cf2 \strokec2 const\cf0 \strokec4  data = \cf2 \strokec2 await\cf0 \strokec4  response.json();\cb1 \
\cb3         \cf2 \strokec2 const\cf0 \strokec4  text = data.candidates?.[\cf8 \strokec8 0\cf0 \strokec4 ]?.content?.parts?.[\cf8 \strokec8 0\cf0 \strokec4 ]?.text;\cb1 \
\cb3         setAiResult(text);\cb1 \
\cb3         setAiLoading(\cf2 \strokec2 false\cf0 \strokec4 );\cb1 \
\cb3         \cf2 \strokec2 return\cf0 \strokec4 ;\cb1 \
\cb3       \} \cf2 \strokec2 catch\cf0 \strokec4  (err) \{\cb1 \
\cb3         \cf2 \strokec2 if\cf0 \strokec4  (i === maxRetries - \cf8 \strokec8 1\cf0 \strokec4 ) \{\cb1 \
\cb3           setAiError(\cf6 \strokec6 "AI\uc0\u12398 \u21628 \u12403 \u20986 \u12375 \u12395 \u22833 \u25943 \u12375 \u12414 \u12375 \u12383 \u12290 \u26178 \u38291 \u12434 \u12362 \u12356 \u12390 \u20877 \u24230 \u12362 \u35430 \u12375 \u12367 \u12384 \u12373 \u12356 \u12290 "\cf0 \strokec4 );\cb1 \
\cb3           setAiLoading(\cf2 \strokec2 false\cf0 \strokec4 );\cb1 \
\cb3           \cf2 \strokec2 return\cf0 \strokec4 ;\cb1 \
\cb3         \}\cb1 \
\cb3         \cf2 \strokec2 await\cf0 \strokec4  \cf2 \strokec2 new\cf0 \strokec4  \cf5 \strokec5 Promise\cf0 \strokec4 (resolve => setTimeout(resolve, delay));\cb1 \
\cb3         delay *= \cf8 \strokec8 2\cf0 \strokec4 ;\cb1 \
\cb3       \}\cb1 \
\cb3     \}\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf7 \strokec7 // --- Handlers ---\cf0 \cb1 \strokec4 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  addMember = (e) => \{\cb1 \
\cb3     e.preventDefault();\cb1 \
\cb3     \cf2 \strokec2 if\cf0 \strokec4  (newMemberName.trim() && !members.includes(newMemberName.trim())) \{\cb1 \
\cb3       setMembers([...members, newMemberName.trim()]);\cb1 \
\cb3       setNewMemberName(\cf6 \strokec6 ''\cf0 \strokec4 );\cb1 \
\cb3     \}\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf2 \strokec2 const\cf0 \strokec4  removeMember = (name) => \{\cb1 \
\cb3     setMembers(members.filter(m => m !== name));\cb1 \
\cb3     setExpenses(expenses.filter(e => e.payer !== name));\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf2 \strokec2 const\cf0 \strokec4  toggleParticipant = (name) => \{\cb1 \
\cb3     \cf2 \strokec2 if\cf0 \strokec4  (selectedParticipants.includes(name)) \{\cb1 \
\cb3       setSelectedParticipants(selectedParticipants.filter(p => p !== name));\cb1 \
\cb3     \} \cf2 \strokec2 else\cf0 \strokec4  \{\cb1 \
\cb3       setSelectedParticipants([...selectedParticipants, name]);\cb1 \
\cb3     \}\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf2 \strokec2 const\cf0 \strokec4  addExpense = (e) => \{\cb1 \
\cb3     e.preventDefault();\cb1 \
\cb3     \cf2 \strokec2 if\cf0 \strokec4  (!description || !amount || !payer || selectedParticipants.length === \cf8 \strokec8 0\cf0 \strokec4 ) \cf2 \strokec2 return\cf0 \strokec4 ;\cb1 \
\
\cb3     \cf2 \strokec2 const\cf0 \strokec4  newExpense = \{\cb1 \
\cb3       id: \cf5 \strokec5 Date\cf0 \strokec4 .now(),\cb1 \
\cb3       description,\cb1 \
\cb3       amount: parseFloat(amount),\cb1 \
\cb3       payer,\cb1 \
\cb3       participants: [...selectedParticipants],\cb1 \
\cb3       date: \cf2 \strokec2 new\cf0 \strokec4  \cf5 \strokec5 Date\cf0 \strokec4 ().toLocaleDateString(\cf6 \strokec6 'ja-JP'\cf0 \strokec4 )\cb1 \
\cb3     \};\cb1 \
\
\cb3     setExpenses([newExpense, ...expenses]);\cb1 \
\cb3     setDescription(\cf6 \strokec6 ''\cf0 \strokec4 );\cb1 \
\cb3     setAmount(\cf6 \strokec6 ''\cf0 \strokec4 );\cb1 \
\cb3     setShowAddForm(\cf2 \strokec2 false\cf0 \strokec4 );\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf2 \strokec2 const\cf0 \strokec4  deleteExpense = (id) => \{\cb1 \
\cb3     setExpenses(expenses.filter(e => e.id !== id));\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf7 \strokec7 // --- Calculations ---\cf0 \cb1 \strokec4 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  calculations = useMemo(() => \{\cb1 \
\cb3     \cf2 \strokec2 const\cf0 \strokec4  balances = \{\};\cb1 \
\cb3     members.forEach(m => balances[m] = \cf8 \strokec8 0\cf0 \strokec4 );\cb1 \
\
\cb3     expenses.forEach(exp => \{\cb1 \
\cb3       \cf2 \strokec2 const\cf0 \strokec4  splitAmount = exp.amount / exp.participants.length;\cb1 \
\cb3       balances[exp.payer] += exp.amount;\cb1 \
\cb3       exp.participants.forEach(p => \{\cb1 \
\cb3         balances[p] -= splitAmount;\cb1 \
\cb3       \});\cb1 \
\cb3     \});\cb1 \
\
\cb3     \cf2 \strokec2 const\cf0 \strokec4  debtors = [];\cb1 \
\cb3     \cf2 \strokec2 const\cf0 \strokec4  creditors = [];\cb1 \
\cb3     \cf5 \strokec5 Object\cf0 \strokec4 .keys(balances).forEach(name => \{\cb1 \
\cb3       \cf2 \strokec2 const\cf0 \strokec4  b = balances[name];\cb1 \
\cb3       \cf2 \strokec2 if\cf0 \strokec4  (b < -\cf8 \strokec8 0.01\cf0 \strokec4 ) debtors.push(\{ name, amount: \cf5 \strokec5 Math\cf0 \strokec4 .abs(b) \});\cb1 \
\cb3       \cf2 \strokec2 else\cf0 \strokec4  \cf2 \strokec2 if\cf0 \strokec4  (b > \cf8 \strokec8 0.01\cf0 \strokec4 ) creditors.push(\{ name, amount: b \});\cb1 \
\cb3     \});\cb1 \
\
\cb3     \cf2 \strokec2 const\cf0 \strokec4  settlements = [];\cb1 \
\cb3     \cf2 \strokec2 let\cf0 \strokec4  dIdx = \cf8 \strokec8 0\cf0 \strokec4 , cIdx = \cf8 \strokec8 0\cf0 \strokec4 ;\cb1 \
\cb3     \cf2 \strokec2 const\cf0 \strokec4  tempDebtors = \cf5 \strokec5 JSON\cf0 \strokec4 .parse(\cf5 \strokec5 JSON\cf0 \strokec4 .stringify(debtors));\cb1 \
\cb3     \cf2 \strokec2 const\cf0 \strokec4  tempCreditors = \cf5 \strokec5 JSON\cf0 \strokec4 .parse(\cf5 \strokec5 JSON\cf0 \strokec4 .stringify(creditors));\cb1 \
\
\cb3     \cf2 \strokec2 while\cf0 \strokec4  (dIdx < tempDebtors.length && cIdx < tempCreditors.length) \{\cb1 \
\cb3       \cf2 \strokec2 const\cf0 \strokec4  debtor = tempDebtors[dIdx];\cb1 \
\cb3       \cf2 \strokec2 const\cf0 \strokec4  creditor = tempCreditors[cIdx];\cb1 \
\cb3       \cf2 \strokec2 const\cf0 \strokec4  amount = \cf5 \strokec5 Math\cf0 \strokec4 .min(debtor.amount, creditor.amount);\cb1 \
\cb3       settlements.push(\{ \cf2 \strokec2 from\cf0 \strokec4 : debtor.name, to: creditor.name, amount: \cf5 \strokec5 Math\cf0 \strokec4 .round(amount) \});\cb1 \
\cb3       debtor.amount -= amount;\cb1 \
\cb3       creditor.amount -= amount;\cb1 \
\cb3       \cf2 \strokec2 if\cf0 \strokec4  (debtor.amount < \cf8 \strokec8 0.01\cf0 \strokec4 ) dIdx++;\cb1 \
\cb3       \cf2 \strokec2 if\cf0 \strokec4  (creditor.amount < \cf8 \strokec8 0.01\cf0 \strokec4 ) cIdx++;\cb1 \
\cb3     \}\cb1 \
\
\cb3     \cf2 \strokec2 return\cf0 \strokec4  \{ balances, settlements \};\cb1 \
\cb3   \}, [members, expenses]);\cb1 \
\
\cb3   \cf7 \strokec7 // --- AI Feature Triggers ---\cf0 \cb1 \strokec4 \
\cb3   \cf2 \strokec2 const\cf0 \strokec4  generateTripStory = () => \{\cb1 \
\cb3     \cf2 \strokec2 const\cf0 \strokec4  context = expenses.map(e => \cf6 \strokec6 `\cf0 \strokec4 $\{e.description\}\cf6 \strokec6 (\cf0 \strokec4 $\{e.amount\}\cf6 \strokec6 \uc0\u20870 )`\cf0 \strokec4 ).join(\cf6 \strokec6 ', '\cf0 \strokec4 );\cb1 \
\cb3     \cf2 \strokec2 const\cf0 \strokec4  prompt = \cf6 \strokec6 `\uc0\u20197 \u19979 \u12398 \u26053 \u34892 \u12398 \u25903 \u20986 \u12522 \u12473 \u12488 \u12363 \u12425 \u12289 \u24605 \u12356 \u20986 \u28145 \u12356 \u26053 \u34892 \u12398 \u12469 \u12510 \u12522 \u12540 \u12434 300\u25991 \u23383 \u31243 \u24230 \u12391 \u20316 \u25104 \u12375 \u12390 \u12367 \u12384 \u12373 \u12356 \u12290 \u12393 \u12435 \u12394 \u26053 \u34892 \u12384 \u12387 \u12383 \u12363 \u24819 \u20687 \u12434 \u33192 \u12425 \u12414 \u12379 \u12390 \u27005 \u12375 \u12367 \u26360 \u12356 \u12390 \u12367 \u12384 \u12373 \u12356 \u12290 \u25903 \u20986 \u12522 \u12473 \u12488 : \cf0 \strokec4 $\{context\}\cf6 \strokec6 `\cf0 \strokec4 ;\cb1 \
\cb3     callGemini(prompt);\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf2 \strokec2 const\cf0 \strokec4  generateSettlementMessage = () => \{\cb1 \
\cb3     \cf2 \strokec2 const\cf0 \strokec4  context = calculations.settlements.map(s => \cf6 \strokec6 `\cf0 \strokec4 $\{s.\cf2 \strokec2 from\cf0 \strokec4 \}\cf6 \strokec6 \uc0\u12363 \u12425 \cf0 \strokec4 $\{s.to\}\cf6 \strokec6 \uc0\u12408 \cf0 \strokec4 $\{s.amount\}\cf6 \strokec6 \uc0\u20870 `\cf0 \strokec4 ).join(\cf6 \strokec6 '\uc0\u12289 '\cf0 \strokec4 );\cb1 \
\cb3     \cf2 \strokec2 const\cf0 \strokec4  prompt = \cf6 \strokec6 `\uc0\u20197 \u19979 \u12398 \u31934 \u31639 \u32080 \u26524 \u12434 \u12289 \u12464 \u12523 \u12540 \u12503 \u12481 \u12515 \u12483 \u12488 \u65288 LINE\u12394 \u12393 \u65289 \u12391 \u36865 \u12426 \u12420 \u12377 \u12356 \u12289 \u19969 \u23527 \u12363 \u12388 \u20998 \u12363 \u12426 \u12420 \u12377 \u12356 \u12513 \u12483 \u12475 \u12540 \u12472 \u12395 \u12414 \u12392 \u12417 \u12390 \u12367 \u12384 \u12373 \u12356 \u12290 \u32117 \u25991 \u23383 \u12418 \u20351 \u12387 \u12390 \u12367 \u12384 \u12373 \u12356 \u12290 \u31934 \u31639 \u20869 \u23481 : \cf0 \strokec4 $\{context\}\cf6 \strokec6 `\cf0 \strokec4 ;\cb1 \
\cb3     callGemini(prompt);\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf2 \strokec2 const\cf0 \strokec4  generateInsights = () => \{\cb1 \
\cb3     \cf2 \strokec2 const\cf0 \strokec4  context = expenses.map(e => \cf6 \strokec6 `\cf0 \strokec4 $\{e.payer\}\cf6 \strokec6 \uc0\u12364 \cf0 \strokec4 $\{e.description\}\cf6 \strokec6 \uc0\u12395 \cf0 \strokec4 $\{e.amount\}\cf6 \strokec6 \uc0\u20870 \u20351 \u29992 `\cf0 \strokec4 ).join(\cf6 \strokec6 ', '\cf0 \strokec4 );\cb1 \
\cb3     \cf2 \strokec2 const\cf0 \strokec4  prompt = \cf6 \strokec6 `\uc0\u20197 \u19979 \u12398 \u25903 \u20986 \u12487 \u12540 \u12479 \u12363 \u12425 \u12289 \u26053 \u34892 \u12398 \u20670 \u21521 \u12434 \u20998 \u26512 \u12375 \u12390 \u12367 \u12384 \u12373 \u12356 \u12290 \u35504 \u12364 \u20309 \u12395 \u19968 \u30058 \u12362 \u37329 \u12434 \u20351 \u12387 \u12383 \u12363 \u12289 \u12393 \u12398 \u12424 \u12358 \u12394 \u12459 \u12486 \u12468 \u12522 \u12540 \u12398 \u25903 \u20986 \u12364 \u22810 \u12363 \u12387 \u12383 \u12363 \u12394 \u12393 \u12289 \u12518 \u12491 \u12540 \u12463 \u12394 \u35222 \u28857 \u12391 \u12467 \u12513 \u12531 \u12488 \u12375 \u12390 \u12367 \u12384 \u12373 \u12356 \u12290 \u12487 \u12540 \u12479 : \cf0 \strokec4 $\{context\}\cf6 \strokec6 `\cf0 \strokec4 ;\cb1 \
\cb3     callGemini(prompt);\cb1 \
\cb3   \};\cb1 \
\
\cb3   \cf2 \strokec2 return\cf0 \strokec4  (\cb1 \
\cb3     <div className=\cf6 \strokec6 "min-h-screen bg-slate-50 text-slate-900 font-sans pb-32"\cf0 \strokec4 >\cb1 \
\cb3       \{\cf7 \strokec7 /* Header */\cf0 \strokec4 \}\cb1 \
\cb3       <header className=\cf6 \strokec6 "bg-indigo-600 text-white shadow-lg p-4 sticky top-0 z-30"\cf0 \strokec4 >\cb1 \
\cb3         <div className=\cf6 \strokec6 "max-w-2xl mx-auto flex justify-between items-center"\cf0 \strokec4 >\cb1 \
\cb3           <h1 className=\cf6 \strokec6 "text-xl font-bold flex items-center gap-2"\cf0 \strokec4 >\cb1 \
\cb3             <\cf5 \strokec5 Receipt\cf0 \strokec4  className=\cf6 \strokec6 "w-6 h-6"\cf0 \strokec4  />\cb1 \
\cb3             \cf5 \strokec5 SplitTrip\cf0 \strokec4  \cf5 \strokec5 AI\cf0 \cb1 \strokec4 \
\cb3           </h1>\cb1 \
\cb3           <div className=\cf6 \strokec6 "text-xs opacity-80"\cf0 \strokec4 >\cb1 \
\cb3             \{expenses.length\}\cf9 \strokec9 \uc0\u20214 \u12398 \u35352 \u37682 \cf0 \cb1 \strokec4 \
\cb3           </div>\cb1 \
\cb3         </div>\cb1 \
\cb3       </header>\cb1 \
\
\cb3       <main className=\cf6 \strokec6 "max-w-2xl mx-auto p-4 space-y-6"\cf0 \strokec4 >\cb1 \
\cb3         \cb1 \
\cb3         \{\cf7 \strokec7 /* Member Management Section */\cf0 \strokec4 \}\cb1 \
\cb3         <section className=\cf6 \strokec6 "bg-white rounded-2xl shadow-sm p-5 border border-slate-100"\cf0 \strokec4 >\cb1 \
\cb3           <h2 className=\cf6 \strokec6 "text-sm font-semibold text-slate-500 uppercase tracking-wider mb-4 flex items-center gap-2"\cf0 \strokec4 >\cb1 \
\cb3             <\cf5 \strokec5 Users\cf0 \strokec4  className=\cf6 \strokec6 "w-4 h-4"\cf0 \strokec4  /> \cf9 \strokec9 \uc0\u12513 \u12531 \u12496 \u12540 \cf0 \cb1 \strokec4 \
\cb3           </h2>\cb1 \
\cb3           <div className=\cf6 \strokec6 "flex flex-wrap gap-2 mb-4"\cf0 \strokec4 >\cb1 \
\cb3             \{members.map(member => (\cb1 \
\cb3               <span key=\{member\} className=\cf6 \strokec6 "inline-flex items-center bg-indigo-50 text-indigo-700 px-3 py-1 rounded-full text-sm font-medium border border-indigo-100"\cf0 \strokec4 >\cb1 \
\cb3                 \{member\}\cb1 \
\cb3                 <button onClick=\{() => removeMember(member)\} className=\cf6 \strokec6 "ml-2 text-indigo-300 hover:text-red-500"\cf0 \strokec4 ><\cf5 \strokec5 X\cf0 \strokec4  className=\cf6 \strokec6 "w-3 h-3"\cf0 \strokec4  /></button>\cb1 \
\cb3               </span>\cb1 \
\cb3             ))\}\cb1 \
\cb3           </div>\cb1 \
\cb3           <form onSubmit=\{addMember\} className=\cf6 \strokec6 "flex gap-2"\cf0 \strokec4 >\cb1 \
\cb3             <input\cb1 \
\cb3               \cf2 \strokec2 type\cf0 \strokec4 =\cf6 \strokec6 "text"\cf0 \cb1 \strokec4 \
\cb3               value=\{newMemberName\}\cb1 \
\cb3               onChange=\{(e) => setNewMemberName(e.target.value)\}\cb1 \
\cb3               placeholder=\cf6 \strokec6 "\uc0\u21517 \u21069 \u12434 \u20837 \u21147 "\cf0 \cb1 \strokec4 \
\cb3               className=\cf6 \strokec6 "flex-1 border border-slate-200 rounded-xl px-4 py-2 text-sm focus:ring-2 focus:ring-indigo-500 outline-none"\cf0 \cb1 \strokec4 \
\cb3             />\cb1 \
\cb3             <button \cf2 \strokec2 type\cf0 \strokec4 =\cf6 \strokec6 "submit"\cf0 \strokec4  className=\cf6 \strokec6 "bg-slate-100 hover:bg-slate-200 p-2 rounded-xl"\cf0 \strokec4 ><\cf5 \strokec5 UserPlus\cf0 \strokec4  className=\cf6 \strokec6 "w-5 h-5"\cf0 \strokec4  /></button>\cb1 \
\cb3           </form>\cb1 \
\cb3         </section>\cb1 \
\
\cb3         \{\cf7 \strokec7 /* AI Assistant Section */\cf0 \strokec4 \}\cb1 \
\cb3         <section className=\cf6 \strokec6 "bg-gradient-to-br from-indigo-50 to-purple-50 rounded-2xl p-5 border border-indigo-100 shadow-sm overflow-hidden relative"\cf0 \strokec4 >\cb1 \
\cb3           <div className=\cf6 \strokec6 "absolute top-0 right-0 p-4 opacity-10 pointer-events-none"\cf0 \strokec4 >\cb1 \
\cb3             <\cf5 \strokec5 Sparkles\cf0 \strokec4  className=\cf6 \strokec6 "w-20 h-20 text-indigo-600"\cf0 \strokec4  />\cb1 \
\cb3           </div>\cb1 \
\cb3           <h2 className=\cf6 \strokec6 "text-sm font-bold text-indigo-600 uppercase tracking-wider mb-4 flex items-center gap-2"\cf0 \strokec4 >\cb1 \
\cb3             <\cf5 \strokec5 Sparkles\cf0 \strokec4  className=\cf6 \strokec6 "w-4 h-4"\cf0 \strokec4  /> \cf5 \strokec5 AI\cf9 \strokec9 \uc0\u12450 \u12471 \u12473 \u12479 \u12531 \u12488 \cf0 \cb1 \strokec4 \
\cb3           </h2>\cb1 \
\cb3           \cb1 \
\cb3           <div className=\cf6 \strokec6 "grid grid-cols-1 sm:grid-cols-3 gap-3 mb-4"\cf0 \strokec4 >\cb1 \
\cb3             <button \cb1 \
\cb3               onClick=\{generateTripStory\}\cb1 \
\cb3               disabled=\{expenses.length === \cf8 \strokec8 0\cf0 \strokec4  || aiLoading\}\cb1 \
\cb3               className=\cf6 \strokec6 "flex items-center justify-center gap-2 bg-white hover:bg-indigo-600 hover:text-white disabled:opacity-50 disabled:hover:bg-white disabled:hover:text-slate-600 p-3 rounded-xl text-xs font-bold shadow-sm transition-all text-slate-600"\cf0 \cb1 \strokec4 \
\cb3             >\cb1 \
\cb3               <\cf5 \strokec5 BookOpen\cf0 \strokec4  className=\cf6 \strokec6 "w-4 h-4"\cf0 \strokec4  /> \cf9 \strokec9 \uc0\u26053 \u34892 \u12398 \u24605 \u12356 \u20986 \u12434 \u29983 \u25104 \cf0 \strokec4  \cf9 \strokec9 \uc0\u10024 \cf0 \cb1 \strokec4 \
\cb3             </button>\cb1 \
\cb3             <button \cb1 \
\cb3               onClick=\{generateSettlementMessage\}\cb1 \
\cb3               disabled=\{calculations.settlements.length === \cf8 \strokec8 0\cf0 \strokec4  || aiLoading\}\cb1 \
\cb3               className=\cf6 \strokec6 "flex items-center justify-center gap-2 bg-white hover:bg-indigo-600 hover:text-white disabled:opacity-50 disabled:hover:bg-white disabled:hover:text-slate-600 p-3 rounded-xl text-xs font-bold shadow-sm transition-all text-slate-600"\cf0 \cb1 \strokec4 \
\cb3             >\cb1 \
\cb3               <\cf5 \strokec5 MessageSquare\cf0 \strokec4  className=\cf6 \strokec6 "w-4 h-4"\cf0 \strokec4  /> \cf9 \strokec9 \uc0\u31934 \u31639 \u12513 \u12483 \u12475 \u12540 \u12472 \u20316 \u25104 \cf0 \strokec4  \cf9 \strokec9 \uc0\u10024 \cf0 \cb1 \strokec4 \
\cb3             </button>\cb1 \
\cb3             <button \cb1 \
\cb3               onClick=\{generateInsights\}\cb1 \
\cb3               disabled=\{expenses.length === \cf8 \strokec8 0\cf0 \strokec4  || aiLoading\}\cb1 \
\cb3               className=\cf6 \strokec6 "flex items-center justify-center gap-2 bg-white hover:bg-indigo-600 hover:text-white disabled:opacity-50 disabled:hover:bg-white disabled:hover:text-slate-600 p-3 rounded-xl text-xs font-bold shadow-sm transition-all text-slate-600"\cf0 \cb1 \strokec4 \
\cb3             >\cb1 \
\cb3               <\cf5 \strokec5 BarChart3\cf0 \strokec4  className=\cf6 \strokec6 "w-4 h-4"\cf0 \strokec4  /> \cf9 \strokec9 \uc0\u20986 \u36027 \u12398 \u20998 \u26512 \u12524 \u12509 \u12540 \u12488 \cf0 \strokec4  \cf9 \strokec9 \uc0\u10024 \cf0 \cb1 \strokec4 \
\cb3             </button>\cb1 \
\cb3           </div>\cb1 \
\
\cb3           \{aiLoading && (\cb1 \
\cb3             <div className=\cf6 \strokec6 "flex items-center justify-center py-8 gap-3 text-indigo-600"\cf0 \strokec4 >\cb1 \
\cb3               <\cf5 \strokec5 Loader2\cf0 \strokec4  className=\cf6 \strokec6 "w-6 h-6 animate-spin"\cf0 \strokec4  />\cb1 \
\cb3               <span className=\cf6 \strokec6 "font-medium animate-pulse text-sm"\cf0 \strokec4 >\cf5 \strokec5 AI\cf9 \strokec9 \uc0\u12364 \u32771 \u12360 \u20013 \cf0 \strokec4 ...</span>\cb1 \
\cb3             </div>\cb1 \
\cb3           )\}\cb1 \
\
\cb3           \{aiError && (\cb1 \
\cb3             <div className=\cf6 \strokec6 "p-4 bg-red-50 text-red-600 rounded-xl text-xs border border-red-100"\cf0 \strokec4 >\cb1 \
\cb3               \{aiError\}\cb1 \
\cb3             </div>\cb1 \
\cb3           )\}\cb1 \
\
\cb3           \{aiResult && !aiLoading && (\cb1 \
\cb3             <div className=\cf6 \strokec6 "bg-white/80 backdrop-blur p-4 rounded-xl border border-indigo-100 animate-in fade-in zoom-in duration-300"\cf0 \strokec4 >\cb1 \
\cb3               <div className=\cf6 \strokec6 "flex justify-between items-start mb-2"\cf0 \strokec4 >\cb1 \
\cb3                 <span className=\cf6 \strokec6 "text-[10px] font-bold text-indigo-400 uppercase"\cf0 \strokec4 >\cf5 \strokec5 AI\cf0 \strokec4  \cf5 \strokec5 Answer\cf0 \strokec4 </span>\cb1 \
\cb3                 <button onClick=\{() => setAiResult(\cf2 \strokec2 null\cf0 \strokec4 )\} className=\cf6 \strokec6 "text-slate-300 hover:text-slate-500"\cf0 \strokec4 >\cb1 \
\cb3                   <\cf5 \strokec5 X\cf0 \strokec4  className=\cf6 \strokec6 "w-4 h-4"\cf0 \strokec4  />\cb1 \
\cb3                 </button>\cb1 \
\cb3               </div>\cb1 \
\cb3               <p className=\cf6 \strokec6 "text-sm leading-relaxed text-slate-700 whitespace-pre-wrap italic"\cf0 \strokec4 >\cb1 \
\cb3                 \{aiResult\}\cb1 \
\cb3               </p>\cb1 \
\cb3             </div>\cb1 \
\cb3           )\}\cb1 \
\cb3         </section>\cb1 \
\
\cb3         \{\cf7 \strokec7 /* Settlement Summary Section */\cf0 \strokec4 \}\cb1 \
\cb3         <section className=\cf6 \strokec6 "bg-white rounded-2xl shadow-md border-t-4 border-indigo-500 p-5"\cf0 \strokec4 >\cb1 \
\cb3           <h2 className=\cf6 \strokec6 "text-sm font-semibold text-slate-500 uppercase tracking-wider mb-4 flex items-center gap-2"\cf0 \strokec4 >\cb1 \
\cb3             <\cf5 \strokec5 CheckCircle2\cf0 \strokec4  className=\cf6 \strokec6 "w-4 h-4 text-indigo-500"\cf0 \strokec4  /> \cf9 \strokec9 \uc0\u31934 \u31639 \u32080 \u26524 \cf0 \cb1 \strokec4 \
\cb3           </h2>\cb1 \
\cb3           \cb1 \
\cb3           \{calculations.settlements.length > \cf8 \strokec8 0\cf0 \strokec4  ? (\cb1 \
\cb3             <div className=\cf6 \strokec6 "space-y-3"\cf0 \strokec4 >\cb1 \
\cb3               \{calculations.settlements.map((s, i) => (\cb1 \
\cb3                 <div key=\{i\} className=\cf6 \strokec6 "flex items-center justify-between p-4 bg-indigo-50/50 rounded-xl border border-indigo-100/50"\cf0 \strokec4 >\cb1 \
\cb3                   <div className=\cf6 \strokec6 "flex items-center gap-3"\cf0 \strokec4 >\cb1 \
\cb3                     <div className=\cf6 \strokec6 "w-10 h-10 rounded-full bg-white flex items-center justify-center font-bold text-indigo-600 shadow-sm border border-indigo-100"\cf0 \strokec4 >\cb1 \
\cb3                       \{s.\cf2 \strokec2 from\cf0 \strokec4 [\cf8 \strokec8 0\cf0 \strokec4 ]\}\cb1 \
\cb3                     </div>\cb1 \
\cb3                     <\cf5 \strokec5 ChevronRight\cf0 \strokec4  className=\cf6 \strokec6 "w-4 h-4 text-indigo-300"\cf0 \strokec4  />\cb1 \
\cb3                     <div className=\cf6 \strokec6 "w-10 h-10 rounded-full bg-indigo-600 flex items-center justify-center font-bold text-white shadow-sm"\cf0 \strokec4 >\cb1 \
\cb3                       \{s.to[\cf8 \strokec8 0\cf0 \strokec4 ]\}\cb1 \
\cb3                     </div>\cb1 \
\cb3                     <div className=\cf6 \strokec6 "ml-1"\cf0 \strokec4 >\cb1 \
\cb3                       <p className=\cf6 \strokec6 "text-[10px] text-slate-400 uppercase font-bold"\cf0 \strokec4 >\cf9 \strokec9 \uc0\u36865 \u37329 \cf0 \strokec4 </p>\cb1 \
\cb3                       <p className=\cf6 \strokec6 "text-sm font-bold text-slate-700"\cf0 \strokec4 >\{s.\cf2 \strokec2 from\cf0 \strokec4 \} \cf9 \strokec9 \uc0\u8594 \cf0 \strokec4  \{s.to\}</p>\cb1 \
\cb3                     </div>\cb1 \
\cb3                   </div>\cb1 \
\cb3                   <div className=\cf6 \strokec6 "text-xl font-black text-indigo-600"\cf0 \strokec4 >\cb1 \
\cb3                     \cf9 \strokec9 \'a5\cf0 \strokec4 \{s.amount.toLocaleString()\}\cb1 \
\cb3                   </div>\cb1 \
\cb3                 </div>\cb1 \
\cb3               ))\}\cb1 \
\cb3             </div>\cb1 \
\cb3           ) : (\cb1 \
\cb3             <p className=\cf6 \strokec6 "text-center py-10 text-slate-400 text-sm italic"\cf0 \strokec4 >\cb1 \
\cb3               \cf9 \strokec9 \uc0\u25903 \u25173 \u12356 \u12434 \u36861 \u21152 \u12377 \u12427 \u12392 \u12371 \u12371 \u12395 \u31934 \u31639 \u26041 \u27861 \u12364 \u34920 \u31034 \u12373 \u12428 \u12414 \u12377 \cf0 \cb1 \strokec4 \
\cb3             </p>\cb1 \
\cb3           )\}\cb1 \
\cb3         </section>\cb1 \
\
\cb3         \{\cf7 \strokec7 /* Expense List Section */\cf0 \strokec4 \}\cb1 \
\cb3         <section className=\cf6 \strokec6 "space-y-4"\cf0 \strokec4 >\cb1 \
\cb3           <h2 className=\cf6 \strokec6 "text-sm font-semibold text-slate-500 uppercase tracking-wider px-1 flex items-center gap-2"\cf0 \strokec4 >\cb1 \
\cb3             <\cf5 \strokec5 Receipt\cf0 \strokec4  className=\cf6 \strokec6 "w-4 h-4"\cf0 \strokec4  /> \cf9 \strokec9 \uc0\u25903 \u25173 \u12356 \u23653 \u27508 \cf0 \cb1 \strokec4 \
\cb3           </h2>\cb1 \
\
\cb3           <div className=\cf6 \strokec6 "space-y-3"\cf0 \strokec4 >\cb1 \
\cb3             \{expenses.length === \cf8 \strokec8 0\cf0 \strokec4  && (\cb1 \
\cb3               <div className=\cf6 \strokec6 "text-center py-12 bg-white rounded-2xl border-2 border-dashed border-slate-100"\cf0 \strokec4 >\cb1 \
\cb3                 <\cf5 \strokec5 Receipt\cf0 \strokec4  className=\cf6 \strokec6 "w-12 h-12 text-slate-100 mx-auto mb-3"\cf0 \strokec4  />\cb1 \
\cb3                 <p className=\cf6 \strokec6 "text-slate-300 text-sm"\cf0 \strokec4 >\cf9 \strokec9 \uc0\u35352 \u37682 \u12364 \u12354 \u12426 \u12414 \u12379 \u12435 \cf0 \strokec4 </p>\cb1 \
\cb3               </div>\cb1 \
\cb3             )\}\cb1 \
\cb3             \{expenses.map(exp => (\cb1 \
\cb3               <div key=\{exp.id\} className=\cf6 \strokec6 "bg-white p-4 rounded-2xl shadow-sm border border-slate-100 hover:border-indigo-100 transition-colors"\cf0 \strokec4 >\cb1 \
\cb3                 <div className=\cf6 \strokec6 "flex justify-between items-start"\cf0 \strokec4 >\cb1 \
\cb3                   <div className=\cf6 \strokec6 "flex gap-4"\cf0 \strokec4 >\cb1 \
\cb3                     <div className=\cf6 \strokec6 "w-12 h-12 rounded-2xl bg-slate-50 flex flex-col items-center justify-center text-indigo-600 font-bold border border-slate-100"\cf0 \strokec4 >\cb1 \
\cb3                       <span className=\cf6 \strokec6 "text-[10px] opacity-50 font-normal"\cf0 \strokec4 >\cf5 \strokec5 WHO\cf0 \strokec4 </span>\cb1 \
\cb3                       \{exp.payer[\cf8 \strokec8 0\cf0 \strokec4 ]\}\cb1 \
\cb3                     </div>\cb1 \
\cb3                     <div>\cb1 \
\cb3                       <h3 className=\cf6 \strokec6 "font-bold text-slate-800 leading-tight"\cf0 \strokec4 >\{exp.description\}</h3>\cb1 \
\cb3                       <p className=\cf6 \strokec6 "text-[10px] text-slate-400 mt-1"\cf0 \strokec4 >\{exp.date\} \cf9 \strokec9 \'95\cf0 \strokec4  \{exp.payer\}\cf9 \strokec9 \uc0\u12364 \u25903 \u25173 \u12356 \cf0 \strokec4 </p>\cb1 \
\cb3                     </div>\cb1 \
\cb3                   </div>\cb1 \
\cb3                   <div className=\cf6 \strokec6 "text-right"\cf0 \strokec4 >\cb1 \
\cb3                     <p className=\cf6 \strokec6 "font-bold text-slate-900 text-lg"\cf0 \strokec4 >\cf9 \strokec9 \'a5\cf0 \strokec4 \{exp.amount.toLocaleString()\}</p>\cb1 \
\cb3                     <button onClick=\{() => deleteExpense(exp.id)\} className=\cf6 \strokec6 "text-slate-300 hover:text-red-500 mt-1"\cf0 \strokec4 ><\cf5 \strokec5 Trash2\cf0 \strokec4  className=\cf6 \strokec6 "w-4 h-4"\cf0 \strokec4  /></button>\cb1 \
\cb3                   </div>\cb1 \
\cb3                 </div>\cb1 \
\cb3                 <div className=\cf6 \strokec6 "flex flex-wrap gap-1 mt-3 pt-3 border-t border-slate-50"\cf0 \strokec4 >\cb1 \
\cb3                   <span className=\cf6 \strokec6 "text-[10px] text-slate-400 mr-2 self-center"\cf0 \strokec4 >\cf9 \strokec9 \uc0\u21106 \u12426 \u21208 \u23550 \u35937 \cf0 \strokec4 :</span>\cb1 \
\cb3                   \{exp.participants.map(p => (\cb1 \
\cb3                     <span key=\{p\} className=\cf6 \strokec6 "text-[10px] bg-slate-100 text-slate-500 px-2 py-1 rounded-lg"\cf0 \strokec4 >\cb1 \
\cb3                       \{p\}\cb1 \
\cb3                     </span>\cb1 \
\cb3                   ))\}\cb1 \
\cb3                 </div>\cb1 \
\cb3               </div>\cb1 \
\cb3             ))\}\cb1 \
\cb3           </div>\cb1 \
\cb3         </section>\cb1 \
\cb3       </main>\cb1 \
\
\cb3       \{\cf7 \strokec7 /* Floating Action Button */\cf0 \strokec4 \}\cb1 \
\cb3       <div className=\cf6 \strokec6 "fixed bottom-8 right-8 z-40"\cf0 \strokec4 >\cb1 \
\cb3         <button \cb1 \
\cb3           onClick=\{() => setShowAddForm(\cf2 \strokec2 true\cf0 \strokec4 )\}\cb1 \
\cb3           className=\cf6 \strokec6 "bg-indigo-600 hover:bg-indigo-700 text-white w-16 h-16 rounded-full shadow-2xl flex items-center justify-center transition-all hover:scale-110 active:scale-95 group"\cf0 \cb1 \strokec4 \
\cb3         >\cb1 \
\cb3           <\cf5 \strokec5 Plus\cf0 \strokec4  className=\cf6 \strokec6 "w-8 h-8 group-hover:rotate-90 transition-transform"\cf0 \strokec4  />\cb1 \
\cb3         </button>\cb1 \
\cb3       </div>\cb1 \
\
\cb3       \{\cf7 \strokec7 /* Add Form Modal */\cf0 \strokec4 \}\cb1 \
\cb3       \{showAddForm && (\cb1 \
\cb3         <div className=\cf6 \strokec6 "fixed inset-0 bg-slate-900/60 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center p-0 sm:p-4 animate-in fade-in duration-200"\cf0 \strokec4 >\cb1 \
\cb3           <div className=\cf6 \strokec6 "bg-white w-full max-w-lg rounded-t-3xl sm:rounded-3xl shadow-2xl overflow-hidden animate-in slide-in-from-bottom duration-300"\cf0 \strokec4 >\cb1 \
\cb3             <div className=\cf6 \strokec6 "p-6"\cf0 \strokec4 >\cb1 \
\cb3               <div className=\cf6 \strokec6 "flex justify-between items-center mb-8"\cf0 \strokec4 >\cb1 \
\cb3                 <h3 className=\cf6 \strokec6 "text-2xl font-black text-slate-800 tracking-tight"\cf0 \strokec4 >\cf9 \strokec9 \uc0\u26032 \u12375 \u12356 \u25903 \u25173 \u12356 \cf0 \strokec4 </h3>\cb1 \
\cb3                 <button onClick=\{() => setShowAddForm(\cf2 \strokec2 false\cf0 \strokec4 )\} className=\cf6 \strokec6 "bg-slate-50 text-slate-400 p-2 rounded-full hover:text-slate-600"\cf0 \strokec4 >\cb1 \
\cb3                   <\cf5 \strokec5 X\cf0 \strokec4  className=\cf6 \strokec6 "w-6 h-6"\cf0 \strokec4  />\cb1 \
\cb3                 </button>\cb1 \
\cb3               </div>\cb1 \
\
\cb3               <form onSubmit=\{addExpense\} className=\cf6 \strokec6 "space-y-6"\cf0 \strokec4 >\cb1 \
\cb3                 <div className=\cf6 \strokec6 "space-y-2"\cf0 \strokec4 >\cb1 \
\cb3                   <label className=\cf6 \strokec6 "text-xs font-bold text-indigo-500 uppercase"\cf0 \strokec4 >\cf9 \strokec9 \uc0\u20869 \u23481 \cf0 \strokec4 </label>\cb1 \
\cb3                   <input\cb1 \
\cb3                     required\cb1 \
\cb3                     \cf2 \strokec2 type\cf0 \strokec4 =\cf6 \strokec6 "text"\cf0 \cb1 \strokec4 \
\cb3                     value=\{description\}\cb1 \
\cb3                     onChange=\{(e) => setDescription(e.target.value)\}\cb1 \
\cb3                     placeholder=\cf6 \strokec6 "\uc0\u20363 : \u12479 \u12463 \u12471 \u12540 \u12289 \u22805 \u39135 \u20195 \u12289 \u12362 \u22303 \u29987 "\cf0 \cb1 \strokec4 \
\cb3                     className=\cf6 \strokec6 "w-full bg-slate-50 border-none rounded-2xl px-5 py-4 text-lg focus:ring-2 focus:ring-indigo-500 transition-all"\cf0 \cb1 \strokec4 \
\cb3                   />\cb1 \
\cb3                 </div>\cb1 \
\
\cb3                 <div className=\cf6 \strokec6 "grid grid-cols-2 gap-4"\cf0 \strokec4 >\cb1 \
\cb3                   <div className=\cf6 \strokec6 "space-y-2"\cf0 \strokec4 >\cb1 \
\cb3                     <label className=\cf6 \strokec6 "text-xs font-bold text-indigo-500 uppercase"\cf0 \strokec4 >\cf9 \strokec9 \uc0\u37329 \u38989 \cf0 \strokec4  (\cf9 \strokec9 \'a5\cf0 \strokec4 )</label>\cb1 \
\cb3                     <input\cb1 \
\cb3                       required\cb1 \
\cb3                       \cf2 \strokec2 type\cf0 \strokec4 =\cf6 \strokec6 "number"\cf0 \cb1 \strokec4 \
\cb3                       value=\{amount\}\cb1 \
\cb3                       onChange=\{(e) => setAmount(e.target.value)\}\cb1 \
\cb3                       placeholder=\cf6 \strokec6 "0"\cf0 \cb1 \strokec4 \
\cb3                       className=\cf6 \strokec6 "w-full bg-slate-50 border-none rounded-2xl px-5 py-4 text-lg focus:ring-2 focus:ring-indigo-500 transition-all"\cf0 \cb1 \strokec4 \
\cb3                     />\cb1 \
\cb3                   </div>\cb1 \
\cb3                   <div className=\cf6 \strokec6 "space-y-2"\cf0 \strokec4 >\cb1 \
\cb3                     <label className=\cf6 \strokec6 "text-xs font-bold text-indigo-500 uppercase"\cf0 \strokec4 >\cf9 \strokec9 \uc0\u25903 \u25173 \u32773 \cf0 \strokec4 </label>\cb1 \
\cb3                     <select\cb1 \
\cb3                       value=\{payer\}\cb1 \
\cb3                       onChange=\{(e) => setPayer(e.target.value)\}\cb1 \
\cb3                       className=\cf6 \strokec6 "w-full bg-slate-50 border-none rounded-2xl px-5 py-4 text-lg focus:ring-2 focus:ring-indigo-500 transition-all appearance-none"\cf0 \cb1 \strokec4 \
\cb3                     >\cb1 \
\cb3                       \{members.map(m => <option key=\{m\} value=\{m\}>\{m\}</option>)\}\cb1 \
\cb3                     </select>\cb1 \
\cb3                   </div>\cb1 \
\cb3                 </div>\cb1 \
\
\cb3                 <div className=\cf6 \strokec6 "space-y-3"\cf0 \strokec4 >\cb1 \
\cb3                   <label className=\cf6 \strokec6 "text-xs font-bold text-indigo-500 uppercase"\cf0 \strokec4 >\cf9 \strokec9 \uc0\u21106 \u12426 \u21208 \u12377 \u12427 \u12513 \u12531 \u12496 \u12540 \cf0 \strokec4 </label>\cb1 \
\cb3                   <div className=\cf6 \strokec6 "flex flex-wrap gap-2"\cf0 \strokec4 >\cb1 \
\cb3                     \{members.map(member => (\cb1 \
\cb3                       <button\cb1 \
\cb3                         \cf2 \strokec2 type\cf0 \strokec4 =\cf6 \strokec6 "button"\cf0 \cb1 \strokec4 \
\cb3                         key=\{member\}\cb1 \
\cb3                         onClick=\{() => toggleParticipant(member)\}\cb1 \
\cb3                         className=\{\cf6 \strokec6 `px-4 py-2 rounded-xl text-sm font-bold transition-all \cf0 \strokec4 $\{\cb1 \
\cb3                           selectedParticipants.includes(member)\cb1 \
\cb3                             ? \cf6 \strokec6 'bg-indigo-600 text-white shadow-lg shadow-indigo-100 scale-105'\cf0 \cb1 \strokec4 \
\cb3                             : \cf6 \strokec6 'bg-slate-50 text-slate-400 hover:bg-slate-100'\cf0 \cb1 \strokec4 \
\cb3                         \}\cf6 \strokec6 `\cf0 \strokec4 \}\cb1 \
\cb3                       >\cb1 \
\cb3                         \{member\}\cb1 \
\cb3                       </button>\cb1 \
\cb3                     ))\}\cb1 \
\cb3                   </div>\cb1 \
\cb3                 </div>\cb1 \
\
\cb3                 <button\cb1 \
\cb3                   \cf2 \strokec2 type\cf0 \strokec4 =\cf6 \strokec6 "submit"\cf0 \cb1 \strokec4 \
\cb3                   className=\cf6 \strokec6 "w-full bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-5 rounded-2xl shadow-xl shadow-indigo-100 transition-all active:scale-[0.98] mt-4"\cf0 \cb1 \strokec4 \
\cb3                 >\cb1 \
\cb3                   \cf9 \strokec9 \uc0\u35352 \u37682 \u12434 \u36861 \u21152 \u12377 \u12427 \cf0 \cb1 \strokec4 \
\cb3                 </button>\cb1 \
\cb3               </form>\cb1 \
\cb3             </div>\cb1 \
\cb3           </div>\cb1 \
\cb3         </div>\cb1 \
\cb3       )\}\cb1 \
\cb3     </div>\cb1 \
\cb3   );\cb1 \
\cb3 \};\cb1 \
\
\cf2 \cb3 \strokec2 export\cf0 \strokec4  \cf2 \strokec2 default\cf0 \strokec4  \cf5 \strokec5 App\cf0 \strokec4 ;\cb1 \
}